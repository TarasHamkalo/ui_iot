<app-surface title="Register action" subtitle="Register shortcut for sending mqtt request">
  <form (ngSubmit)="onSubmit(formDirective)" [formGroup]="actionRegistrationForm" #formDirective="ngForm">
    <mat-card-content>

      <mat-form-field appearance="outline">
        <mat-label>Action name</mat-label>
        <input #nameInput matInput formControlName="actionName">
        <mat-hint align="start">{{ nameInput.value.length}}/150</mat-hint>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Topic</mat-label>
        <input #topicInput matInput formControlName="mqttTopic">
        <mat-hint align="start">{{ topicInput.value.length}}/150</mat-hint>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Payload</mat-label>
        <textarea #payloadInput matInput formControlName="mqttPayload"></textarea>
        <mat-hint align="start">{{ payloadInput.value.length}}/650</mat-hint>
      </mat-form-field>

      <mat-checkbox formControlName="mqttRetain">Retain message</mat-checkbox>

    </mat-card-content>
    <mat-card-actions>

      <button mat-stroked-button (click)="clearForm(formDirective)">
        Clear form
      </button>

      <button mat-flat-button type="submit" [disabled]="actionRegistrationForm.invalid">
        Register
      </button>
    </mat-card-actions>
  </form>

</app-surface>